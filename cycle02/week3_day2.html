<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="css/colours.css">
  <link rel="stylesheet" href="css/sketch.css">
  <script src="js/d3.v7.min.js"></script>
  <script src="js/d4.v1.3.js"></script>
</head>

<body>
  <script>
    const colBg1 = col.pal_spectrum_ix[2]
    const colAccent1 = col.pal_spectrum_ix[5]


    const tree6 = {
      root: [50, 50],
      children: [
        {
          c: [20, 20],
          r: 6,
          branches: [
            {
              root: 0.3,
              children: [
                {
                  c: [25, 40],
                  r: 2
                }
              ]
            },
            {
              root: 0.6,
              children: [
                {
                  c: [30, 25],
                  r: 4
                },
                {
                  c: [10, 25],
                  r: 4
                }
              ]
            }
          ]
        },
        {
          c: [70, 20],
          r: 8
        },
        {
          c: [80, 85],
          r: 5,
          branches: [
            {
              root: 0.4,
              children: [
                {
                  c: [50, 78],
                  r: 3
                }
              ]
            },
            {
              root: 0.6,
              children: [
                {
                  c: [78, 70],
                  r: 3
                }
              ]
            }
          ]
        },
        {
          c: [30, 65],
          r: 7
        }
      ]
    }


    {
      const svg = newSketch()
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 6
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + 6) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              brPath.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              brCircle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }


    {
      const svg = newSketch()
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 6
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + 6) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              const branchStartTime = pathStartTime + elTime*branch.root
              brPath.animate('path', [0, 1], [branchStartTime, pathEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              brCircle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }


    {
      const svg = newSketch()
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 12
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + 6) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              const branchStartTime = pathStartTime + elTime*branch.root
              brPath.animate('path', [0, 1], [branchStartTime, pathEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              brCircle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }

    {
      const svg = newSketch()
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 12
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + 6) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              const branchStartTime = pathStartTime + elTime*branch.root
              const branchTime = (elTime / path.length) * brPath.length
              const branchEndTime = branchStartTime + branchTime
              brPath.animate('path', [0, 1], [branchStartTime, branchEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              brCircle.animate('r', [0, 1], [branchEndTime, circleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }

    {
      const svg = newSketch()
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 12
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + 6) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              const branchStartTime = pathStartTime + elTime*branch.root
              const branchTime = (elTime / path.length) * brPath.length
              const branchEndTime = branchStartTime + branchTime
              brPath.animate('path', [0, 1], [branchStartTime, branchEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              const brCircleTime = (elTime / child.r) * bchild.r
              const brCircleEndTime = branchEndTime + brCircleTime
              brCircle.animate('r', [0, 1], [branchEndTime, brCircleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }



    {
      const svg = newSketch()
      const colOffset = 2
      const colBg1 = col.pal_spectrum_ix[colOffset]
      const colAccent1 = col.pal_spectrum_ix[colOffset + 3]
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 12
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + colOffset + 4) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              const branchStartTime = pathStartTime + elTime*branch.root
              const branchTime = (elTime / path.length) * brPath.length
              const branchEndTime = branchStartTime + branchTime
              brPath.animate('path', [0, 1], [branchStartTime, branchEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              const brCircleTime = (elTime / child.r) * bchild.r
              const brCircleEndTime = branchEndTime + brCircleTime
              brCircle.animate('r', [0, 1], [branchEndTime, brCircleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }


    {
      const svg = newSketch()
      const colOffset = 3
      const colBg1 = col.pal_spectrum_ix[colOffset]
      const colAccent1 = col.pal_spectrum_ix[colOffset + 3]
      svg.bg.pen(colBg1, colAccent1, 1)
      const tree = tree6
      const totalTime = 12
      const childTime = 1 / (tree.children.length + 1)
      const elTime = childTime / 2
      let pathStartTime = 0
      tree.children.forEach((child, i) => {
        const j = (i + colOffset + 4) % col.pal_spectrum_ix.length
        const colChild = col.pal_spectrum_ix[j]
        const path = svg.draw('path', [tree.root, child.c])
        path.pen('none', colAccent1, 1)
        const pathEndTime = pathStartTime + elTime
        path.animate('path', [0, 1], [pathStartTime, pathEndTime], totalTime)
        const circle = svg.draw('circle', { r: child.r, c: child.c })
        circle.pen(colChild, 'none', 1)
        const circleStartTime = pathEndTime
        const circleEndTime = circleStartTime + elTime
        circle.animate('r', [0, 1], [circleStartTime, circleEndTime], totalTime)

        if (child.branches) {
          child.branches.forEach(branch => {
            const branchLength = path.length * branch.root
            const branchRoot = path.pointAtLength(branchLength)
            branch.children.forEach(bchild => {
              const brPath = svg.draw('path', [branchRoot, bchild.c])
              brPath.pen('none', colAccent1, 1)
              const branchStartTime = pathStartTime + elTime*branch.root
              const branchTime = (elTime / path.length) * brPath.length
              const branchEndTime = branchStartTime + branchTime
              brPath.animate('path', [0, 1], [branchStartTime, branchEndTime], totalTime)
              const brCircle = svg.draw('circle', { r: bchild.r, c: bchild.c })
              brCircle.pen(colChild, 'none', 1)
              const brCircleTime = (elTime / child.r) * bchild.r
              const brCircleEndTime = branchEndTime + brCircleTime
              brCircle.animate('r', [0, 1], [branchEndTime, brCircleEndTime], totalTime)
            })

          })
        }
        pathStartTime = circleEndTime
      })
    }


  </script>
</body>

</html>